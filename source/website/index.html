<!DOCTYPE html><html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FNF Script Generator (Lua + Haxe)</title><style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;min-height:100vh}
header{padding:20px;background:rgba(0,0,0,.5);text-align:center}
header h1{color:#00eaff;font-size:2.2rem}
main{max-width:1200px;margin:auto;padding:25px}
section{background:rgba(255,255,255,.08);padding:20px;border-radius:14px;margin-bottom:25px}
h2{color:#00eaff;margin-bottom:10px}
label{display:block;margin-top:10px}
select,input,textarea{width:100%;margin-top:5px;padding:10px;border-radius:8px;border:none;font-family:monospace}
textarea{min-height:320px}
button{background:#00eaff;color:#000;border:none;padding:10px 18px;border-radius:10px;cursor:pointer;font-weight:bold;margin-top:10px}
button:hover{background:#00b7c2}
.buttons{display:flex;flex-wrap:wrap;gap:10px}
footer{text-align:center;padding:15px;background:rgba(0,0,0,.6);font-size:.9rem}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:8px}
</style></head>
<body><header>
  <h1>FNF Script Generator</h1>
  <p>Psych Engine • Lua & Haxe • HTML puro</p>
</header><main><section>
<h2>Configuração</h2>
<label>Linguagem</label>
<select id="lang">
  <option value="lua">Lua (Psych Engine)</option>
  <option value="haxe">Haxe (.hx)</option>
</select><label>Tipo de Script</label> <select id="tipo">

  <option value="empty">Script vazio</option>
  <option value="modchart">Modchart</option>
  <option value="hud">HUD</option>
  <option value="event">Evento</option>
  <option value="camera">Camera Follow</option>
  <option value="notesplash">Note Splash</option>
  <option value="customnote">Custom Note</option>
  <option value="stage">Stage</option>
  <option value="cutscene">Cutscene</option>
  <option value="dialogue">Dialogue</option>
  <option value="health">Sistema de Vida</option>
  <option value="cameraeffects">Efeitos de Câmera</option>
</select><label>Velocidade / Intensidade</label> <input id="vel" value="0.5">

<div class="buttons">
  <button id="btnGerar">Gerar</button>
  <button id="btnLimpar">Limpar</button>
</div>
</section><section>
<h2>Editor / Saída</h2>
<textarea id="saida"></textarea>
<div class="buttons">
  <button id="btnCopiar">Copiar</button>
  <button id="btnBaixar">Baixar</button>
</div>
</section><section>
<h2>Stage JSON (Psych Engine)</h2>
<label>Imagem</label><input id="stageImg" value="stage/bg">
<label>X</label><input id="stageX" value="-600">
<label>Y</label><input id="stageY" value="-200">
<label>Zoom</label><input id="stageZoom" value="0.9">
<button id="btnStage">Gerar Stage JSON</button>
</section></main><footer>© 2026 • FNF Script Generator</footer><script>
// ====== EVENTOS (BUG CORRIGIDO) ======
document.getElementById('btnGerar').addEventListener('click', gerar);
document.getElementById('btnLimpar').addEventListener('click', ()=>saida.value='');
document.getElementById('btnCopiar').addEventListener('click', ()=>{saida.select();document.execCommand('copy')});
document.getElementById('btnBaixar').addEventListener('click', baixar);
document.getElementById('btnStage').addEventListener('click', gerarStageJSON);

function gerar(){
  const tipo=document.getElementById('tipo').value;
  const vel=document.getElementById('vel').value;
  const lang=document.getElementById('lang').value;
  let out="";

  if(lang==='lua'){
    out += "-- Lua Script (Psych Engine)\n\n";
    if(tipo==='empty') out+="function onCreate() end\nfunction onUpdate(elapsed) end";
    if(tipo==='modchart') out+=`function onBeatHit() if curBeat%4==0 then doTweenZoom('z','camGame',getProperty('camGame.zoom')+0.1,${vel},'quadOut') end end`;
    if(tipo==='hud') out+="function onCreatePost() setTextSize('scoreTxt',22) end";
    if(tipo==='event') out+="function onEvent(n) if n=='Flash' then cameraFlash('camGame','FFFFFF',0.5) end end";
    if(tipo==='camera') out+="function onUpdate() triggerEvent('Camera Follow Pos','600','450') end";
    if(tipo==='notesplash') out+="function goodNoteHit(i,d,t,s) spawnNoteSplashOnNote(i) end";
    if(tipo==='customnote') out+="function goodNoteHit(i,d,t,s) setProperty('health',getProperty('health')-0.2) end";
    if(tipo==='health') out+="function opponentNoteHit() setProperty('health',getProperty('health')-0.02) end";
    if(tipo==='cameraeffects') out+="function onBeatHit() cameraShake('camGame',0.02,0.1) end";
  }

  if(lang==='haxe'){
    out += "// Haxe Script (.hx)\\nimport flixel.FlxG;\\nimport flixel.tweens.FlxTween;\\n\\nclass Script {\\n";
    if(tipo==='empty') out+="  public function new() {}\n";
    if(tipo==='modchart') out+="  public function onBeatHit(curBeat:Int){ if(curBeat%4==0) FlxG.camera.zoom+=0.1; }\n";
    if(tipo==='hud') out+="  public function onCreatePost(){ PlayState.instance.scoreTxt.size = 22; }\n";
    if(tipo==='camera') out+="  public function onUpdate(elapsed:Float){ FlxG.camera.follow(null); }\n";
    if(tipo==='health') out+="  public function opponentNoteHit(){ PlayState.instance.health -= 0.02; }\n";
    out += "}";
  }

  document.getElementById('saida').value = out;
}

function gerarStageJSON(){
  const stage={
    defaultZoom:parseFloat(stageZoom.value),
    boyfriend:[770,450],
    girlfriend:[400,130],
    opponent:[100,450],
    sprites:[{name:'bg',image:stageImg.value,x:+stageX.value,y:+stageY.value,scrollFactor:[1,1]}]
  };
  saida.value = JSON.stringify(stage,null,2);
}

function baixar(){
  const txt=saida.value;
  const isJson=txt.trim().startsWith('{');
  const isHaxe=txt.includes('class Script');
  const blob=new Blob([txt],{type:'text/plain'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download=isJson?'stage.json':(isHaxe?'Script.hx':'script.lua');
  a.click();
}
</script></body>
</html>